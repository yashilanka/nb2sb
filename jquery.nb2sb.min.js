// GPLv2 http://www.gnu.org/licenses/gpl-2.0-standalone.html
!function(a){a.fn.nb2sb=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={selectors:{opener:void 0,content:void 0,closingLinks:void 0},settings:{dataName:"nb2sb",gap:64,animation:{duration:500,easing:"swing"},style:{width:500,padding:"1em"}},ajax:{}},r=a.extend(!0,q,b),s=this,t=a(r.selectors.opener),u=a(r.selectors.content),v=a(r.selectors.closingLinks),w=r.settings.dataName,x=r.settings.gap,y=r.settings.animation.duration,z=r.settings.animation.easing,A=r.settings.style,B={},C=a(window).width(),D=0;return c=A.width>=C-x?C-x:A.width,d={minHeight:s.css("min-height"),backgroundColor:s.css("background-color"),zIndex:s.css("z-index")},e={position:"fixed",top:parseInt(d.minHeight),right:-c,bottom:0,zIndex:d.zIndex-1,maxWidth:c,backgroundColor:d.backgroundColor},a.extend(!0,B,e,A),h={width:"100%",height:"100%",overflow:"auto"},a("body").append("<div data-"+w+'="sidebar"><div data-'+w+'="sub-wrapper"></div></div>'),f=a("body").children().filter(function(){return"sidebar"===a(this).data(w)}),g=f.children().filter(function(){return"sub-wrapper"===a(this).data(w)}),f.css(B).hide(),f.css("width",c),g.css(h).append(u.html()),i=g.children(),j=i.prop("class"),i.removeClass(j).addClass("nav nav-pills nav-stacked nb2sb-active"),768>C?(u.hide(),f.show()):(u.show(),f.hide()),t.click(function(){l=f.outerWidth(),D++,k=function(a){return 0===a%2?!0:!1},m={right:0},n={right:-l},!1===k(D)?f.animate(m,{duration:y,easing:z}):!0===k(D)&&f.animate(n,{duration:y,easing:z})}),f.on("click",v,function(){l=f.outerWidth(),n={right:-l},f.animate(n,{duration:y,easing:z}),D=0}),a(window).resize(function(){p=a(window).width(),o=A.width>=p-x?p-x:A.width,n={right:-o},f.css("max-width",o),768>p?(u.hide(),f.show()):(u.show(),f.hide().animate(n,{duration:y,easing:z,complete:function(){D=0}}))}),this}}(jQuery);
